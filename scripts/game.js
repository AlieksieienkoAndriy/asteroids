!function(){function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i||t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}return t}()({1:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=t("./Trail"),a=s(r),h=function(){function t(e){n(this,t),this.game=e.game,this.helpers=this.game.helpers,this.position=e.position,this.velocity={x:this.helpers.randomNumBetween(-1.5,1.5),y:this.helpers.randomNumBetween(-1.5,1.5)},this.rotation=0,this.rotationSpeed=this.helpers.randomNumBetween(-1,1),this.radius=e.size,this.points=80/this.radius*5,this.create=e.create,this.addScore=this.game.addScore,this.vertices=this.helpers.asteroidVertices(8,e.size)}return o(t,[{key:"destroy",value:function(){this["delete"]=!0,this.addScore(this.points);for(var e=0;e<this.radius;e++){var i=new a["default"]({lifeSpan:this.helpers.randomNumBetween(60,100),size:this.helpers.randomNumBetween(1,3),position:{x:this.position.x+this.helpers.randomNumBetween(-this.radius/4,this.radius/4),y:this.position.y+this.helpers.randomNumBetween(-this.radius/4,this.radius/4)},velocity:{x:this.helpers.randomNumBetween(-1.5,1.5),y:this.helpers.randomNumBetween(-1.5,1.5)}});this.create(i,"trails")}if(this.radius>10)for(var s=0;s<2;s++){var n=new t({game:this.game,size:this.radius/2,position:{x:this.helpers.randomNumBetween(-10,20)+this.position.x,y:this.helpers.randomNumBetween(-10,20)+this.position.y},create:this.create.bind(this),addScore:this.addScore.bind(this)});this.create(n,"asteroids")}}},{key:"draw",value:function(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.rotation+=this.rotationSpeed,this.rotation>=360&&(this.rotation-=360),this.rotation<0&&(this.rotation+=360),this.position.x>t.width+this.radius?this.position.x=-this.radius:this.position.x<-this.radius&&(this.position.x=t.width+this.radius),this.position.y>t.height+this.radius?this.position.y=-this.radius:this.position.y<-this.radius&&(this.position.y=t.height+this.radius);var e=this.game.ctx;e.save(),e.translate(this.position.x,this.position.y),e.rotate(this.rotation*Math.PI/180),e.strokeStyle="#FFF",e.lineWidth=2,e.beginPath(),e.moveTo(0,-this.radius);for(var i=1;i<this.vertices.length;i++)e.lineTo(this.vertices[i].x,this.vertices[i].y);e.closePath(),e.stroke(),e.restore()}}]),t}();i["default"]=h},{"./Trail":4}],2:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(e){s(this,t),this.helpers=e.game.helpers;var i=this.helpers.rotatePoint({x:0,y:-20},{x:0,y:0},e.ship.rotation*Math.PI/180);this.position={x:e.ship.position.x+i.x,y:e.ship.position.y+i.y},this.velocity={x:i.x/2,y:i.y/2},this.rotation=e.ship.rotation,this.radius=2}return n(t,[{key:"destroy",value:function(){this["delete"]=!0}},{key:"draw",value:function(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,(this.position.x<0||this.position.y<0||this.position.x>t.width||this.position.y>t.height)&&this.destroy();var e=t.ctx;e.save(),e.translate(this.position.x,this.position.y),e.rotate(this.rotation*Math.PI/180),e.fillStyle="#FFF",e.lineWidth=0,5,e.beginPath(),e.arc(0,0,2,0,2*Math.PI),e.closePath(),e.fill(),e.restore()}}]),t}();i["default"]=o},{}],3:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=t("./Trail"),a=s(r),h=t("./Bullet"),u=s(h),l=function(){function t(e){n(this,t),this.game=e,this.helpers=e.helpers,this.position={x:this.game.width/2,y:this.game.height/2},this.velocity={x:0,y:0},this.radius=15,this.inertia=.99,this.rotation=0,this.rotationSpeed=6,this.speed=.15,this.keys=[],this.keyPressed=!1,this.shootInterval=200,this.lastShot=null,this.init()}return o(t,[{key:"init",value:function(){var t=this;window.addEventListener("keydown",function(e){var i=e.key;t.keys.includes(i)||t.keys.push(e.key),t.keyPressed=!0}),window.addEventListener("keyup",function(e){var i=e.key;t.keys.splice(t.keys.indexOf(i),1),t.keys.length||(t.keyPressed=!1)})}},{key:"destroy",value:function(){this["delete"]=!0,this.game.saveResult(),this.game.endGame()}},{key:"controller",value:function(t){var e=this;t.forEach(function(t){switch(t){case"ArrowUp":e.accelerate();break;case"ArrowRight":e.rotate("RIGHT");break;case"ArrowLeft":e.rotate("LEFT");break;case" ":e.shoot()}})}},{key:"shoot",value:function(){if(Date.now()-this.lastShot>this.shootInterval){var t=new u["default"]({ship:this,game:this.game});this.game.createObject(t,"bullets"),this.lastShot=Date.now()}}},{key:"randomNumBetween",value:function(t,e){return Math.random()*(e-t+1)+t}},{key:"rotate",value:function(t){"LEFT"==t&&(this.rotation-=this.rotationSpeed),"RIGHT"==t&&(this.rotation+=this.rotationSpeed)}},{key:"accelerate",value:function(){this.velocity.x-=Math.sin(-this.rotation*Math.PI/180)*this.speed,this.velocity.y-=Math.cos(-this.rotation*Math.PI/180)*this.speed;var t=this.helpers.rotatePoint({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Math.PI/180),e=new a["default"]({lifeSpan:this.randomNumBetween(20,40),size:this.randomNumBetween(1,3),position:{x:this.position.x+t.x+this.randomNumBetween(-2,2),y:this.position.y+t.y+this.randomNumBetween(-2,2)},velocity:{x:t.x/this.randomNumBetween(3,5),y:t.y/this.randomNumBetween(3,5)}});this.game.createObject(e,"trails")}},{key:"draw",value:function(){this.keyPressed&&this.controller(this.keys),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.rotation>=360&&(this.rotation-=360),this.rotation<0&&(this.rotation+=360),this.position.x>this.game.width?this.position.x=0:this.position.x<0&&(this.position.x=this.game.width),this.position.y>this.game.height?this.position.y=0:this.position.y<0&&(this.position.y=this.game.height),this.game.ctx.save(),this.game.ctx.translate(this.position.x,this.position.y),this.game.ctx.rotate(this.rotation*Math.PI/180),this.game.ctx.strokeStyle="#ffffff",this.game.ctx.fillStyle="#000000",this.game.ctx.lineWidth=2,this.game.ctx.beginPath(),this.game.ctx.moveTo(0,-15),this.game.ctx.lineTo(10,10),this.game.ctx.lineTo(5,7),this.game.ctx.lineTo(-5,7),this.game.ctx.lineTo(-10,10),this.game.ctx.closePath(),this.game.ctx.fill(),this.game.ctx.stroke(),this.game.ctx.restore()}}]),t}();i["default"]=l},{"./Bullet":2,"./Trail":4}],4:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(e){s(this,t),this.position=e.position,this.velocity=e.velocity,this.radius=e.size,this.lifeSpan=e.lifeSpan,this.inertia=.98}return n(t,[{key:"destroy",value:function(){this["delete"]=!0}},{key:"draw",value:function(t){var e=t.ctx;this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.radius-=.1,this.radius<.1&&(this.radius=.1),this.lifeSpan--<0&&this.destroy(),e.save(),e.translate(this.position.x,this.position.y),e.fillStyle="#ffffff",e.lineWidth=2,e.beginPath(),e.moveTo(0,-this.radius),e.arc(0,0,this.radius,0,2*Math.PI),e.closePath(),e.fill(),e.restore()}}]),t}();i["default"]=o},{}],5:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(){s(this,t)}return n(t,[{key:"toRadians",value:function(t){return t*(Math.PI/180)}},{key:"rotatePoint",value:function(t,e,i){return{x:(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i)+e.x,y:(t.x-e.x)*Math.sin(i)+(t.y-e.y)*Math.cos(i)+e.y}}},{key:"randomNumBetween",value:function(t,e){return Math.random()*(e-t+1)+t}},{key:"randomNumBetweenExcluding",value:function(t,e,i,s){for(var n=this.randomNumBetween(t,e);n>i&&n<s;)n=Math.random()*(e-t+1)+t;return n}},{key:"asteroidVertices",value:function(t,e){for(var i=[],s=0;s<t;s++)i[s]={x:(-Math.sin(360/t*s*Math.PI/180)+Math.round(2*Math.random()-1)*Math.random()/3)*e,y:(-Math.cos(360/t*s*Math.PI/180)+Math.round(2*Math.random()-1)*Math.random()/3)*e};return i}}]),t}();i["default"]=o},{}],6:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=t("./helpers"),a=s(r),h=t("./Spaceship"),u=s(h),l=t("./Asteroids"),c=s(l),d=function(){function t(){n(this,t),this.container=document.getElementById("content"),this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.hud=document.getElementById("hud"),this.scoreContainer=document.getElementById("score"),this.endContainer=document.getElementById("end-game"),this.startButton=document.getElementById("start"),this.resultContainer=document.getElementById("result"),this.bestResultContainer=document.getElementById("best-result"),this.resultFromStorage=localStorage.getItem("asteroids_best"),this.helpers=new a["default"],this.prevUpdateTime=0,this.height=0,this.width=0,this.asteroidCount=5,this.ship=[],this.asteroids=[],this.bullets=[],this.trails=[],this.score=0,this.inGame=!0,this.fullScreen=!1,this.init()}return o(t,[{key:"init",value:function(){var t=this;window.addEventListener("resize",function(){return t.onResize()}),window.addEventListener("keydown",function(e){("Enter"===e.key||" "===e.key&&!t.inGame)&&t.startGame(),"f"===e.key&&(t.fullScreen?(t.fullScreen=!1,document.exitFullscreen()):(t.fullScreen=!0,document.body.requestFullscreen()))}),this.onResize(),this.startButton.addEventListener("click",function(){return t.startGame()}),this.startGame(),requestAnimationFrame(function(e){return t.update(e)})}},{key:"startGame",value:function(){this.inGame=!0,this.endContainer.style.display="none",this.hud.style.display="flex",this.asteroids=[],this.asteroidCount=5,this.score=0,this.createObject(new u["default"](this),"ship"),this.generateAsteroids(this.asteroidCount)}},{key:"endGame",value:function(){this.inGame=!1,this.hud.style.display="none",this.endContainer.style.display="block",this.resultContainer.innerText="Your result: "+this.score,this.bestResultContainer.innerText="Best: "+this.resultFromStorage}},{key:"addScore",value:function(t){this.game.inGame&&(this.game.score+=t)}},{key:"drawScore",value:function(t){this.scoreContainer.innerText="Score: "+this.score}},{key:"saveResult",value:function(){(this.score>this.resultFromStorage||null===this.resultFromStorage)&&(localStorage.setItem("asteroids_best",this.score),this.resultFromStorage=this.score)}},{key:"onResize",value:function(){this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height}},{key:"update",value:function(t){var e=this;t-this.prevUpdateTime;if(this.prevUpdateTime=t,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawScore(),!this.asteroids.length){var i=this.asteroidCount+1;this.asteroidCount=i,this.generateAsteroids(i)}this.checkCollisionsWith(this.bullets,this.asteroids),this.checkCollisionsWith(this.ship,this.asteroids),this.updateObjects(this.trails,"trails"),this.updateObjects(this.asteroids,"asteroids"),this.updateObjects(this.bullets,"bullets"),this.updateObjects(this.ship,"ship"),requestAnimationFrame(function(t){return e.update(t)})}},{key:"createObject",value:function(t,e){this[e].push(t)}},{key:"generateAsteroids",value:function(t){for(var e=this.ship[0],i=0;i<t;i++){var s=new c["default"]({game:this,size:80,position:{x:this.helpers.randomNumBetweenExcluding(0,this.width,e.position.x-60,e.position.x+60),y:this.helpers.randomNumBetweenExcluding(0,this.height,e.position.y-60,e.position.y+60)},create:this.createObject.bind(this)});this.createObject(s,"asteroids")}}},{key:"checkCollisionsWith",value:function(t,e){var i=t.length-1,s=void 0;for(i;i>-1;--i)for(s=e.length-1;s>-1;--s){var n=t[i],o=e[s];this.checkCollision(n,o)&&(n.destroy(),o.destroy())}}},{key:"checkCollision",value:function(t,e){var i=t.position.x-e.position.x,s=t.position.y-e.position.y,n=Math.sqrt(i*i+s*s);return n<t.radius+e.radius}},{key:"updateObjects",value:function(t,e){var i=0,s=!0,n=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var h=r.value;h["delete"]?this[e].splice(i,1):t[i].draw(this),i++}}catch(u){n=!0,o=u}finally{try{!s&&a["return"]&&a["return"]()}finally{if(n)throw o}}}}]),t}();i["default"]=d,new d},{"./Asteroids":1,"./Spaceship":3,"./helpers":5}]},{},[6]);